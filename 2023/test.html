<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  body {
    /* background: #98bec8; */
  }
</style>

<body>
  <script>

    let embedimSnow = document.getElementById('embedim--snow')

    if (!embedimSnow) {
      function embRand(a, b) {
        return Math.floor(Math.random() * (b - a + 1)) + a
      }

      let embCSS =
        '.embedim-snow{position: absolute;width: 10px;height: 10px;background: red;border-radius: 50%;margin-top:-10px}'

      let embHTML = ''

      for (i = 1; i < 65; i++) {

        embHTML += '<i class="embedim-snow"></i>'

        let rndX = embRand(0, 1000000) * 0.0001,
          rndO = embRand(-100000, 100000) * 0.0001,
          rndT = (embRand(3, 8) * 10).toFixed(2),
          rndS = (embRand(0, 10000) * 0.0001).toFixed(2)

        embCSS +=
          '.embedim-snow:nth-child(' +
          i +
          '){' +
          'opacity:' +
          (embRand(1, 10000) * 0.0001).toFixed(2) +
          ';' +
          'transform:translate(' +
          rndX.toFixed(2) +
          'vw,-10px) scale(' +
          rndS +
          ');' +
          'animation:fall-' +
          i +
          ' ' +
          embRand(10, 30) +
          's -' +
          embRand(0, 30) +
          's linear infinite' +
          '}' +
          '@keyframes fall-' +
          i +
          '{' +
          rndT +
          '%{' +
          'transform:translate(' +
          (rndX + rndO).toFixed(2) +
          'vw,' +
          rndT +
          'vh) scale(' +
          rndS +
          ')' +
          '}' +
          'to{' +
          'transform:translate(' +
          (rndX + rndO / 2).toFixed(2) +
          'vw, 105vh) scale(' +
          rndS +
          ')' +
          '}' +
          '}'
      }

      embedimSnow = document.createElement('div')

      embedimSnow.id = 'embedim--snow'

      embedimSnow.innerHTML =
        '<style>#embedim--snow{position:fixed;left:0;top:0;bottom:0;width:100vw;height:100vh;overflow:hidden;z-index:9999999;pointer-events:none}' +
        embCSS +
        '</style>' +
        embHTML

      document.body.appendChild(embedimSnow)
    }


    // test test
    const list = [123, 123, 9, 45, 123, 133]
    const map = new Map
    const res = list.filter(item => {
      // console.log(item, map.get(item), 'map.get(item)')
      if (!map.has(item)) {
        map.set(item, 1)
      } else {
        map.set(item, map.get(item) + 1)
      }
      console.log(map, 'map')
      return map.get(item) < 3
    })
    console.log(res)
  </script>
</body>

</html>