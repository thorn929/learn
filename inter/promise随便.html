<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>随便的东西==--==--==</title>
</head>
<style>
  .zxx_text_overflow_4{width:120px; height:1.3em; overflow:hidden; zoom:1;border: 1px solid red;}
  .zxx_text_overflow_4 .text_con{background: red;float:left; height:1.3em; margin-right:3em; overflow:hidden;}
  .zxx_text_overflow_4 .text_dotted{width:3em; height:1.31em; float:right; margin-top:-1.3em;}
</style>
<body>
</div>
</body>
<div class="zxx_text_overflow_4">
  <div class="text_con">ssss这是一段比较长的的|ddd文字，用来测试是否文字溢出时会用省略号显示。</div>
  <div class="text_dotted">11。</div>
</div>
<script>
  // function fn(num) {
  //   return new Promise(function(resolve, reject) {
  //     if (typeof num == 'number') {
  //       resolve();
  //     } else {
  //       reject();
  //     }
  //   })
  //     .then(function() {
  //       console.log('参数是一个number值');
  //     })
  //     .then(null, function() {
  //       console.log('参数不是一个number值');
  //     })
  // }
  //
  // fn('hahha');
  // fn(1234);

  // 封装一个get请求的方法
  function getJSON(url) {
    return new Promise(function(resolve, reject) {
      var XHR = new XMLHttpRequest();
      XHR.open('GET', url, true);
      XHR.send();

      XHR.onreadystatechange = function() {
        if (XHR.readyState == 4) {
          if (XHR.status == 200) {
            try {
              var response = JSON.parse(XHR.responseText);
              resolve(response);
            } catch (e) {
              reject(e);
            }
          } else {
            reject(new Error(XHR.statusText));
          }
        }
      }
    })
  }

  // getJSON(url).then(resp => console.log(resp));

  var url = 'https://hq.tigerbrokers.com/fundamental/finance_calendar/getType/2017-02-26/2017-06-10';
  var url1 = 'https://hq.tigerbrokers.com/fundamental/finance_calendar/getType/2017-03-26/2017-06-10';
  //
  // function renderAll() {
  //   return Promise.all([getJSON(url), getJSON(url1)]);
  // }
  //
  // renderAll().then(function(value) {
  //   // 建议大家在浏览器中看看这里的value值
  //   console.log(value);
  // })




  function renderRace() {
    return Promise.race([getJSON(url), getJSON(url1)]);
  }

  renderRace().then(function(value) {
    console.log(value);
  })





</script>
</html>